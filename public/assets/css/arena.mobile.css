/* =========================================================================
   Arena Mobile CSS — unico foglio per tutto il progetto (max-width:768px)
   NON tocca il desktop: TUTTO è dentro @media.
   - Header allineato, hamburger a destra
   - Drawer destro (backdrop + slide-in)
   - Card/KPI/Eventi Torneo Flash
   - Tabelle → card (es. /premi.php)
   - Modali full-screen
   ========================================================================= */

@media (max-width:768px){

  /* ------------------ Tokens & base ------------------ */
  :root{
    --mbl-gap: 12px;
    --mbl-radius: 14px;
    --mbl-touch: 44px;
  }
  html, body{ overscroll-behavior-y: none; }
  main{ padding-bottom: 20px; }

  /* ------------------ Header (hamburger + allineamenti) ------------------ */
  .subhdr, .site-footer{ display:none !important; }      /* richiesto */

  .hdr__bar{
    display:flex; align-items:center; gap:10px;
    min-height:56px;
  }
  /* spinge a destra il blocco azioni (guest: .hdr__nav, utente: .hdr__right) */
  .hdr__nav, .hdr__right{
    display:flex; align-items:center; gap:10px;
    margin-left:auto;
  }
  /* per l’utente lasciamo solo l’avatar in header, il resto rimane nel menu */
  .hdr__right > *:not(.hdr__usr){ display:none !important; }

  /* hamburger (iniettato via JS se manca) */
  #mbl-trigger, .js-hamburger, .hdr__burger, .hdr__menu-btn{
    display:inline-flex; align-items:center; justify-content:center;
    width:40px; height:40px; border-radius:10px;
    border:1px solid var(--c-border, #1e293b);
    background:var(--c-bg-2, #0f172a); color:var(--c-text, #fff);
  }
  #mbl-trigger svg, .js-hamburger svg, .hdr__burger svg, .hdr__menu-btn svg{ width:20px; height:20px; }
  /* il trigger sta SEMPRE a destra del gruppo azioni */
  .hdr__right + #mbl-trigger,
  .hdr__nav + #mbl-trigger{ margin-left:10px; }

  /* ------------------ Drawer destro ------------------ */
  #mbl-backdrop{
    position:fixed; inset:0; background:rgba(0,0,0,.45);
    backdrop-filter:saturate(120%) blur(1px);
    opacity:0; pointer-events:none; transition:opacity .2s ease; z-index:70;
  }
  #mbl-backdrop.mbl-open{ opacity:1; pointer-events:auto; }

  #mbl-drawer{
    position:fixed; top:0; right:0; height:100dvh; width:320px; max-width:92vw;
    transform:translateX(105%); transition:transform .24s ease;
    background:var(--c-bg,#0b1220); color:var(--c-text,#fff);
    border-left:1px solid var(--c-border,rgba(255,255,255,.12)); z-index:71;
    display:flex; flex-direction:column;
  }
  #mbl-drawer.mbl-open{ transform:translateX(0); }

  #mbl-drawer .mbl-head{
    display:flex; align-items:center; gap:10px;
    padding:12px 14px; border-bottom:1px solid var(--c-border,rgba(255,255,255,.12));
  }
  #mbl-drawer .mbl-title{ font-weight:900; }
  #mbl-drawer .mbl-close{
    margin-left:auto; width:36px; height:36px; border-radius:10px;
    border:1px solid var(--c-border,#1e293b); background:var(--c-bg-2,#0f172a); color:var(--c-text,#fff);
    display:inline-flex; align-items:center; justify-content:center;
  }
  #mbl-drawer .mbl-close svg{ width:20px; height:20px; }

  #mbl-drawer .mbl-scroll{ flex:1; overflow:auto; }
  #mbl-drawer .mbl-sec{ padding:12px; }
  #mbl-drawer .mbl-sec__title{
    font-size:12px; font-weight:900; letter-spacing:.3px;
    color:var(--c-muted,#9fb7ff); text-transform:uppercase; margin-bottom:4px;
  }
  #mbl-drawer .mbl-list{ list-style:none; margin:0; padding:0; }
  #mbl-drawer .mbl-list a{
    display:block; padding:12px 8px; color:var(--c-text,#e5e7eb);
    text-decoration:none; font-weight:800;
  }
  /* CTA */
  #mbl-drawer .mbl-ctaRow{ display:flex; gap:8px; padding:6px 0 0 }
  #mbl-drawer .mbl-cta, #mbl-drawer .mbl-ghost{
    display:inline-flex; align-items:center; justify-content:center;
    height:40px; padding:0 14px; border-radius:9999px; font-weight:800;
  }
  #mbl-drawer .mbl-cta{
    background: var(--c-primary,#3b82f6); color:#fff;
    border:1px solid color-mix(in lab, var(--c-primary,#3b82f6) 85%, #000);
  }
  #mbl-drawer .mbl-ghost{
    background: transparent; color: var(--c-text,#e5e7eb); border:1px solid var(--c-border,#1f2937);
  }
  /* Dati account */
  #mbl-drawer .mbl-account{ padding:2px 0 6px; }
  #mbl-drawer .mbl-kv{ display:flex; gap:6px; padding:6px 2px; font-size:14px; }
  #mbl-drawer .mbl-kv .k{ min-width:92px; color:var(--c-muted,#9fb7ff); font-weight:900; }
  #mbl-drawer .mbl-kv .v{ font-weight:800; }
  #mbl-drawer .mbl-kv .refresh{
    margin-left:6px; width:30px; height:30px; border-radius:10px;
    display:inline-flex; align-items:center; justify-content:center;
    border:1px solid var(--c-border,#1f2937); background:var(--c-bg-2,#0f172a);
  }

  /* ------------------ Card & KPI ------------------ */
  .card, .tcard, .panel, .box, [class*="card"]{
    border-radius: var(--mbl-radius);
  }
  .mbl-kpi-grid{
    display:grid; grid-template-columns:1fr 1fr; gap:10px;
  }
  .mbl-kpi{ min-width:0; }
  .mbl-hero-actions{ display:flex; flex-wrap:wrap; gap:10px; margin-top:12px; }
  .mbl-hero-actions .btn{ flex:1 1 48%; min-height: var(--mbl-touch); }

  /* neutralizza float/absolute in hero */
  .mbl-fix-static{ position:static !important; float:none !important; }

  /* ------------------ Eventi Torneo (FLASH) ------------------ */
  [data-path^="flash/torneo"] .mbl-event,
  [data-path*="flash/torneo"] .mbl-event{
    display:grid;
    grid-template-columns:repeat(3,1fr);
    gap:10px;
    align-items:center;
  }
  [data-path^="flash/torneo"] .mbl-event .mbl-oval,
  [data-path*="flash/torneo"] .mbl-event .mbl-oval{
    grid-column: 1 / -1;    /* ovale sopra */
  }
  [data-path^="flash/torneo"] .mbl-event .mbl-bet,
  [data-path*="flash/torneo"] .mbl-event .mbl-bet{
    width:100%;
    min-height: var(--mbl-touch);
  }
  @media (max-width:360px){
    [data-path^="flash/torneo"] .mbl-event,
    [data-path*="flash/torneo"] .mbl-event{
      grid-template-columns:repeat(2,1fr);
    }
    [data-path^="flash/torneo"] .mbl-event .mbl-bet:nth-child(3),
    [data-path*="flash/torneo"] .mbl-event .mbl-bet:nth-child(3){
      grid-column:1 / -1; /* 2+1 su schermi minuscoli */
    }
  }

  /* KPI eroe torneo flash 2×2 */
  [data-path^="flash/torneo"] .mbl-kpi-grid,
  [data-path*="flash/torneo"] .mbl-kpi-grid{ margin-top:8px; }

  /* ------------------ Tabelle → Card (es. /premi.php) ------------------ */
  .table thead, table thead{ display:none; }
  .table, .table tbody, .table tr,
  table, table tbody, table tr{
    display:block;
  }
  .table tr, table tr{
    background: var(--c-bg-2, #0f172a);
    border:1px solid var(--c-border, rgba(255,255,255,.08));
    border-radius:12px; padding:10px; margin-bottom:10px;
  }
  .table td, table td{
    display:flex; justify-content:space-between; gap:10px;
    padding:8px 6px; border:none;
  }
  .table td::before, table td::before{
    content: attr(data-th);
    font-weight:800; color: var(--c-muted, #9fb7ff);
  }

  /* ------------------ Modali full-screen ------------------ */
  .modal .modal-card{
    width:100vw !important; max-width:100vw !important;
    height:100dvh !important; max-height:100dvh !important;
    border-radius:0 !important; margin:0 !important;
  }
  .modal .modal-body{ height: calc(100dvh - 110px); overflow:auto; }

  /* Touch-target SÓLO per i nostri elementi (per non decentrar testi) */
  #mbl-trigger, .mbl-cta, .mbl-ghost, .mbl-bet{ min-height: var(--mbl-touch); }
}
