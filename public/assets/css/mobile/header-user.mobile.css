/* Header User - Mobile only (non tocca il desktop) */
@media (max-width: 768px){

  /* 1) Sub-header nascosto su mobile (menu nel drawer) */
  .subhdr{ display:none !important; }

  /* 2) Barra header: cluster di destra compatto */
  .hdr__bar{
    display:flex; align-items:center; justify-content:space-between;
    min-height:56px;
  }
  .mbl-u-right{
    display:flex; align-items:center; gap:10px; margin-left:auto;
  }

  /* 3) Icone rotonde (messaggi + hamburger + avatar wrapper) */
  .mbl-u-icon,
  #mbl-userBtn,
  .mbl-u-msgBtn{
    display:inline-flex; align-items:center; justify-content:center;
    width:42px; height:42px; border-radius:12px;
    border:1px solid var(--c-border,#1e293b);
    background:var(--c-bg-2,#0f172a); color:var(--c-text,#fff);
    -webkit-tap-highlight-color:transparent;
  }
  #mbl-userBtn svg,
  .mbl-u-msgBtn svg{ width:22px; height:22px; }

  /* 4) Ricarica: usa lo stile esistente; se spostata nel cluster, riduce il padding */
  .mbl-u-right .btn, .mbl-u-right a.btn{
    height:42px; display:inline-flex; align-items:center; justify-content:center;
    padding:0 16px; border-radius:9999px; font-weight:800;
  }

  /* 5) Avatar/username compatti */
  .mbl-u-usr{
    display:inline-flex; align-items:center; gap:8px;
    padding:0 8px; height:42px; border-radius:12px;
    border:1px solid var(--c-border,#1e293b);
    background:var(--c-bg-2,#0f172a); color:var(--c-text,#fff);
    max-width:46vw;
  }
  .mbl-u-usr .ava{
    width:26px; height:26px; border-radius:50%;
    background:var(--c-bg,#0b1220); border:1px solid var(--c-border,#1e293b);
    display:inline-flex; align-items:center; justify-content:center; font-weight:900;
  }
  .mbl-u-usr .name{
    max-width:32vw; overflow:hidden; white-space:nowrap; text-overflow:ellipsis;
    font-weight:800;
  }

  /* 6) Drawer a destra (stesso stile del guest; X rotonda) */
  #mbl-userBackdrop{
    position:fixed; inset:0; background:rgba(0,0,0,.45);
    backdrop-filter:saturate(120%) blur(1px);
    opacity:0; pointer-events:none; transition:opacity .2s ease; z-index:70;
  }
  #mbl-userBackdrop.mbl-open{ opacity:1; pointer-events:auto; }

  #mbl-userDrawer{
    position:fixed; top:0; right:0; height:100dvh;
    width:320px; max-width:92vw;
    transform:translateX(105%); transition:transform .24s ease;
    background:var(--c-bg,#0b1220); color:var(--c-text,#fff);
    border-left:1px solid var(--c-border,rgba(255,255,255,.08)); z-index:71;
    display:flex; flex-direction:column;
  }
  #mbl-userDrawer.mbl-open{ transform:translateX(0); }

  #mbl-userDrawer .mbl-head{
    display:flex; align-items:center; gap:10px;
    padding:14px; border-bottom:1px solid var(--c-border,rgba(255,255,255,.08));
  }
  #mbl-userDrawer .mbl-title{ font-weight:900; font-size:16px; }
  #mbl-userDrawer .mbl-close{
    margin-left:auto; width:42px; height:42px; border-radius:12px;
    border:1px solid var(--c-border,rgba(255,255,255,.12));
    background:var(--c-bg-2,#0f172a); color:var(--c-text,#fff);
    display:inline-flex; align-items:center; justify-content:center;
  }
  #mbl-userDrawer .mbl-close svg{ width:22px; height:22px; }

  #mbl-userDrawer .mbl-scroll{ flex:1; overflow:auto; }
  #mbl-userDrawer .mbl-sec{ padding:12px 12px 6px; }
  #mbl-userDrawer .mbl-sec__title{
    font-size:12px; font-weight:900; color:var(--c-muted,#9fb7ff);
    letter-spacing:.3px; padding:2px 6px 8px; text-transform:uppercase;
  }
  #mbl-userDrawer .mbl-list{ list-style:none; margin:0; padding:0; }
  #mbl-userDrawer .mbl-list li{ margin:0; }
  #mbl-userDrawer .mbl-list a{
    display:block; padding:12px 8px; text-decoration:none;
    color:var(--c-text,#e5e7eb); border-radius:8px; font-weight:800;
  }

  /* 7) KV rows (ArenaCoins / Utente) con iconcina accanto al valore */
  .mbl-kv{
    display:flex; align-items:center; gap:8px; padding:6px 2px;
  }
  .mbl-kv .k{ min-width:102px; color:var(--c-muted,#9fb7ff); font-weight:900; }
  .mbl-kv .v{ font-weight:900; }
  .mbl-kv .after{ margin-left:6px; display:inline-flex; align-items:center; }
  .mbl-kv .after button{
    width:28px; height:28px; border-radius:8px;
    border:1px solid var(--c-border,#203049); background:var(--c-bg-2,#0f172a);
    display:inline-flex; align-items:center; justify-content:center;
  }
  .mbl-kv .after svg{ width:16px; height:16px; }

  .mbl-userRow{
    display:flex; align-items:center; gap:10px; padding:6px 2px;
  }
  .mbl-userRow .ava{
    width:28px; height:28px; border-radius:50%;
    background:var(--c-bg,#0b1220); border:1px solid var(--c-border,#1e293b);
    display:inline-flex; align-items:center; justify-content:center; font-weight:900;
  }
  .mbl-userRow .name{ font-weight:900; flex:1; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
  .mbl-userRow .msgBtn{
    width:32px; height:32px; border-radius:10px; border:1px solid var(--c-border,#203049);
    background:var(--c-bg-2,#0f172a); display:inline-flex; align-items:center; justify-content:center;
  }
  .mbl-userRow .msgBtn svg{ width:18px; height:18px; }

  /* 8) CTA row (stessa altezza per primaria e ghost) */
  .mbl-ctaRow{ display:flex; gap:8px; padding:8px 6px 0; flex-wrap:wrap; }
  .mbl-ctaRow .mbl-cta,
  .mbl-ctaRow .mbl-ghost{
    height:40px; padding:0 16px; border-radius:9999px; font-weight:800;
    display:inline-flex; align-items:center; justify-content:center;
  }
  .mbl-ctaRow .mbl-cta{
    background:var(--c-primary,#3b82f6); color:#fff;
    border:1px solid color-mix(in lab, var(--c-primary,#3b82f6) 85%, #000);
  }
  .mbl-ctaRow .mbl-ghost{
    background:transparent; color:var(--c-text,#e5e7eb);
    border:1px solid var(--c-border,#1f2937);
  }

  /* 9) Quando drawer aperto, blocca lo scroll */
  html.mbl-lock, body.mbl-lock{ overflow:hidden !important; }
}

/* Desktop: layer invisibile */
@media (min-width: 769px){
  #mbl-userBackdrop, #mbl-userDrawer, #mbl-userBtn{ display:none !important; }
}
